[gd_scene load_steps=2 format=3 uid="uid://d2x25ef4uooyx"]

[sub_resource type="GDScript" id="GDScript_4nt2l"]
script/source = "extends Control

@onready var body_preview: TextureRect=$BodyPreview
@onready var barrel_preview: TextureRect=$BarrelPreview
# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	SkinManager.skin_changed.connect(_on_skin_changed)
	update_preview()
	GlobalSettings.load_settings()
	SkinManager.select_combo(GlobalSettings.current_body_index,GlobalSettings.current_barrel_index)


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	pass
func _on_skin_changed(body_texture: Texture2D, barrel_texture: Texture2D):
	body_preview.texture = body_texture
	barrel_preview.texture = barrel_texture
func update_preview():
	body_preview.texture=SkinManager.get_current_body_skin()
	barrel_preview.texture=SkinManager.get_current_barrel_skin()
	print(\"Body texture: \", SkinManager.get_current_body_skin())
	print(\"Barrel texture: \", SkinManager.get_current_barrel_skin())
func _on_next_body_pressed():
	SkinManager.next_body_skin()
	GlobalSettings.current_body_index=SkinManager.current_body_index
	GlobalSettings.save_settings()
	print(\"nextbody\")

func _on_prev_body_pressed():
	SkinManager.prev_body_skin()
	GlobalSettings.current_body_index=SkinManager.current_body_index
	GlobalSettings.save_settings()
	print(\"luibody\")

func _on_next_barrel_pressed():
	SkinManager.next_barrel_skin()
	GlobalSettings.current_barrel_index=SkinManager.current_barrel_index
	GlobalSettings.save_settings()
	print(\"nextbarrel\")

func _on_prev_barrel_pressed():
	SkinManager.prev_barrel_skin()
	GlobalSettings.current_barrel_index=SkinManager.current_barrel_index
	GlobalSettings.save_settings()
	print(\"luibarrel\")
"

[node name="SkinMenu" type="Control"]
layout_mode = 3
anchors_preset = 0
offset_right = 1130.0
offset_bottom = 640.0
script = SubResource("GDScript_4nt2l")

[node name="BodyPreview" type="TextureRect" parent="."]
layout_mode = 0
offset_left = 31.0
offset_top = 94.0
offset_right = 136.0
offset_bottom = 181.0

[node name="BarrelPreview" type="TextureRect" parent="."]
layout_mode = 0
offset_left = 229.0
offset_top = 102.0
offset_right = 376.0
offset_bottom = 202.0

[node name="NextBodyBtn" type="Button" parent="."]
layout_mode = 0
offset_left = 23.0
offset_top = 217.0
offset_right = 68.0
offset_bottom = 268.0
text = "tien body"

[node name="PrevBodyBtn" type="Button" parent="."]
layout_mode = 0
offset_left = 106.0
offset_top = 218.0
offset_right = 151.0
offset_bottom = 268.0
text = "lui body"

[node name="NextBarrelBtn" type="Button" parent="."]
layout_mode = 0
offset_left = 277.0
offset_top = 226.0
offset_right = 285.0
offset_bottom = 234.0
text = "tien nong"

[node name="PrevBarrelBtn" type="Button" parent="."]
layout_mode = 0
offset_left = 201.0
offset_top = 224.0
offset_right = 209.0
offset_bottom = 232.0
text = "lui nong"

[connection signal="pressed" from="NextBodyBtn" to="." method="_on_next_body_pressed"]
[connection signal="pressed" from="PrevBodyBtn" to="." method="_on_prev_body_pressed"]
[connection signal="pressed" from="NextBarrelBtn" to="." method="_on_next_barrel_pressed"]
[connection signal="pressed" from="PrevBarrelBtn" to="." method="_on_prev_barrel_pressed"]
